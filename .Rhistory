library(tidyverse)
library(shiny)
9+9
library(knitr)
library(data.table)
library(Rcpp)
install.packages("shinyjs")
install.packages("shinycss")
shiny::runApp('passaic_nitrate_app')
runApp('passaic_nitrate_app')
discharge_data
source("~/passaic_nitrate_app/R/01_load_packages_and_data.R", echo=TRUE)
setwd("~/passaic_nitrate_app")
source("~/passaic_nitrate_app/R/01_load_packages_and_data.R", echo=TRUE)
discharge_data
table(discharge_data$Date)
table(year(discharge_data$Date))
table(year(discharge_data %>% filter(Parameter == "Nitrogen, Nitrate Total (as N)") %>% pull(Date)))
runApp()
discharge_data
sort(unique(discharge_data$Year))
?any_vars
discharge_data %>% names
discharge_data %>%
filter(Parameter == "Nitrogen, Nitrate Total (as N)") %>%
filter_at('Month', any_vars(. %in% as.numeric(1:12))) %>%
group_by_("Location", 'Month') %>%
summarise(Quantity.Avg = mean(Quantity.Avg, na.rm = TRUE)) %>%
filter(!is.nan(Quantity.Avg)) %>%
arrange(desc(Location)) %>%
left_join(discharge_sections)
discharge_Data
discharge_data
discharge_data %>% as_tibble()
read_discharge_comparison_box_plot_data <- function(by = c("Year", "Month"), range = 2000:2018) {
by <- rlang::arg_match(by)
if(by == 'Year') {
discharge_data %>%
filter(Parameter == "Nitrogen, Nitrate Total (as N)", Year %in% range) %>%
group_by(Location, Year) %>%
summarise(Quantity.Avg = mean(Quantity.Avg, na.rm = TRUE)) %>%
filter(!is.nan(Quantity.Avg)) %>%
left_join(discharge_sections)
} else { #by = 'Month'
discharge_data %>%
filter(Parameter == "Nitrogen, Nitrate Total (as N)", Month %in% range) %>%
group_by(Location, Month) %>%
summarise(Quantity.Avg = mean(Quantity.Avg, na.rm = TRUE)) %>%
filter(!is.nan(Quantity.Avg)) %>%
left_join(discharge_sections)
}
}
read_discharge_comparison_box_plot_data()
read_discharge_comparison_box_plot_data('Month', 1:12)
discharge_sections
read_discharge_comparison_box_plot_data('Month', 1:12)
read_discharge_comparison_box_plot_data()
runApp()
read_discharge_comparison_box_plot_data(range = 2000)
discharge_data %>%
filter(Parameter == "Nitrogen, Nitrate Total (as N)", Year %in% range)
discharge_data %>%
filter(Parameter == "Nitrogen, Nitrate Total (as N)") %>% pull(Year) %>% table
discharge_data %>%
filter(Parameter == "Nitrogen, Nitrate Total (as N)", Year == 2000)
View(discharge_data %>%
filter(Parameter == "Nitrogen, Nitrate Total (as N)", Year == 2000))
View(discharge_data %>%
filter(Parameter == "Nitrogen, Nitrate Total (as N)",
!is.na(Quantity.Avg)) %>% summarise(min(Year)))
runApp()
read_discharge_comparison_box_plot_data('Month', 1)
runApp()
read_discharge_comparison_box_plot_data2 <- function(by = c("Year", "Month"), range = 2002:2018) {
by <- rlang::arg_match(by)
if(all(2002:2018 %in% range) || all(1:12 %in% range)) {
discharge_data %>%
filter(Parameter == "Nitrogen, Nitrate Total (as N)") %>%
group_by_("Location", by) %>%
summarise(Quantity.Avg = mean(Quantity.Avg, na.rm = TRUE)) %>%
filter(!is.nan(Quantity.Avg)) %>%
left_join(discharge_sections)
} else {
if (by == "Year") {
discharge_data %>%
filter(Parameter == "Nitrogen, Nitrate Total (as N)") %>%
filter_at(by, any_vars(. %in% as.numeric(range))) %>%
group_by_("Location", by) %>%
summarise(Quantity.Avg = mean(Quantity.Avg, na.rm = TRUE)) %>%
filter(!is.nan(Quantity.Avg)) %>%
arrange(desc(Location)) %>%
left_join(discharge_sections)
} else {
discharge_data %>%
filter(Parameter == "Nitrogen, Nitrate Total (as N)") %>%
filter_at(by, any_vars(. %in% as.numeric(range))) %>%
group_by_("Location", "Month", "Year") %>%
summarise(Quantity.Avg = mean(Quantity.Avg, na.rm = TRUE)) %>%
filter(!is.nan(Quantity.Avg)) %>%
arrange(desc(Location)) %>%
left_join(discharge_sections)
}
}
}
read_discharge_comparison_box_plot_data2()
read_discharge_comparison_box_plot_data2(by = 'Month', 1)
read_discharge_comparison_box_plot_data2(by = 'Month', 1:12)
nrow(read_discharge_comparison_box_plot_data2(by = 'Month', 1:12))
nrow(read_discharge_comparison_box_plot_data2())
runApp()
runApp()
